!function(){"use strict";Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_glav",type:"select",values:{1:"Скрыть",0:"Отображать"},default:"0"},field:{name:"Логотипы вместо названий",description:"Отображает логотипы фильмов вместо текста"}}),Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_lang",type:"select",values:{"":"Как в Lampa",ru:"Русский",en:"English",uk:"Українська",be:"Беларуская",kz:"Қазақша",pt:"Português",es:"Español",fr:"Français",de:"Deutsch",it:"Italiano"},default:""},field:{name:"Язык логотипа",description:"Приоритетный язык для поиска логотипа"}}),Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_size",type:"select",values:{w300:"w300",w500:"w500",w780:"w780",original:"Оригинал"},default:"original"},field:{name:"Размер логотипа",description:"Разрешение загружаемого изображения"}}),window.logoplugin||function(){function e(e){e.style.marginTop="0.35em",e.style.marginLeft="0.03em",e.style.maxWidth="9em",e.style.maxHeight="1.35em",e.style.height="auto",e.style.width="auto",e.style.display="block",e.style.objectFit="contain",e.style.objectPosition="left bottom",e.style.opacity="1",e.style.transition="none"}window.logoplugin=!0,Lampa.Listener.follow("full",(function(t){if("complite"==t.type&&"1"!=Lampa.Storage.get("logo_glav")){var a=t.data.movie,o=a.name?"tv":"movie",i=t.object.activity.render().find(".full-start-new__title"),n=Lampa.Storage.get("logo_lang",""),s=n||Lampa.Storage.get("language"),l=Lampa.Storage.get("logo_size","original"),g=function(e,t,a){return"logo_cache_smart_v7_"+e+"_"+t+"_"+a}(o,a.id,s),r=Lampa.Storage.get(g);if(r&&"none"!==r){var m=new Image;return m.src=r,e(m),i.empty().append(m),void i.css({opacity:"1",transition:"none"})}if(i.css({opacity:"1",transition:"none"}),""!=a.id){var p=0;setTimeout((function(){var e=i[0];e&&(p=e.getBoundingClientRect().height)}),50);var c=Lampa.TMDB.api(o+"/"+a.id+"/images?api_key="+Lampa.TMDB.key()+"&include_image_language="+s+",en,null");$.get(c,(function(t){var a=null;if(t.logos&&t.logos.length>0){for(var o=0;o<t.logos.length;o++)if(t.logos[o].iso_639_1==s){a=t.logos[o].file_path;break}if(!a)for(var n=0;n<t.logos.length;n++)if("en"==t.logos[n].iso_639_1){a=t.logos[n].file_path;break}a||(a=t.logos[0].file_path)}if(a){var r=Lampa.TMDB.image("/t/p/"+l+a.replace(".svg",".png"));Lampa.Storage.set(g,r);var m=new Image;m.src=r,m.style.marginTop="0.35em",m.style.marginLeft="0.03em",m.style.maxWidth="9em",m.style.display="block",m.style.objectFit="contain",m.style.objectPosition="left bottom",m.style.opacity="0",m.style.width="auto",m.onload=function(){setTimeout((function(){i[0]&&(p=i[0].getBoundingClientRect().height);var t=1.35*parseFloat(window.getComputedStyle(i[0]).fontSize);i.css({transition:"opacity 0.3s ease",opacity:"0"}),setTimeout((function(){i.empty(),m.style.height=p+"px",m.style.maxHeight="none",i.append(m),i.css({opacity:"1",transition:"none"}),m.offsetHeight,m.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease",requestAnimationFrame((function(){m.style.height=t+"px",setTimeout((function(){m.style.opacity="1"}),50),setTimeout((function(){e(m)}),Math.max(300,400)+50)}))}),300)}),100)},m.onerror=function(){Lampa.Storage.set(g,"none"),i.css({opacity:"1",transition:"none"})}}else Lampa.Storage.set(g,"none")})).fail((function(){}))}}}))}()}();
