!function(){"use strict";Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_glav",type:"select",values:{1:"Скрыть",0:"Отображать"},default:"0"},field:{name:"Логотипы вместо названий",description:"Отображает логотипы фильмов вместо текста"}}),Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_lang",type:"select",values:{"":"Как в Lampa",ru:"Русский",en:"English",uk:"Українська",be:"Беларуская",kz:"Қазақша",pt:"Português",es:"Español",fr:"Français",de:"Deutsch",it:"Italiano"},default:""},field:{name:"Язык логотипа",description:"Приоритетный язык для поиска логотипа"}}),Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_size",type:"select",values:{w300:"w300",w500:"w500",w780:"w780",original:"Оригинал"},default:"original"},field:{name:"Размер логотипа",description:"Разрешение загружаемого изображения"}}),window.logoplugin||function(){function e(e,t){t&&(t.style.height="",t.style.overflow="",t.style.display="",t.style.transition="none"),e.style.paddingTop="0.35em",e.style.marginTop="0",e.style.marginLeft="0.03em",e.style.maxWidth="9em",e.style.maxHeight="1.35em",e.style.boxSizing="content-box",e.style.height="auto",e.style.width="auto",e.style.display="block",e.style.objectFit="contain",e.style.objectPosition="left bottom",e.style.opacity="1",e.style.transition="none"}window.logoplugin=!0,Lampa.Listener.follow("full",(function(t){if("complite"==t.type&&"1"!=Lampa.Storage.get("logo_glav")){var a=t.data.movie,i=a.name?"tv":"movie",o=t.object.activity.render().find(".full-start-new__title"),n=o[0],l=Lampa.Storage.get("logo_lang",""),s=l||Lampa.Storage.get("language"),g=Lampa.Storage.get("logo_size","original"),r=function(e,t,a){return"logo_cache_smart_v11_"+e+"_"+t+"_"+a}(i,a.id,s),p=Lampa.Storage.get(r);if(p&&"none"!==p){var c=new Image;return c.src=p,e(c,null),o.empty().append(c),void o.css({opacity:"1",transition:"none"})}if(o.css({opacity:"1",transition:"none"}),""!=a.id){var m=0;setTimeout((function(){n&&(m=n.getBoundingClientRect().height)}),50);var u=Lampa.TMDB.api(i+"/"+a.id+"/images?api_key="+Lampa.TMDB.key()+"&include_image_language="+s+",en,null");$.get(u,(function(t){var a=null;if(t.logos&&t.logos.length>0){for(var i=0;i<t.logos.length;i++)if(t.logos[i].iso_639_1==s){a=t.logos[i].file_path;break}if(!a)for(var l=0;l<t.logos.length;l++)if("en"==t.logos[l].iso_639_1){a=t.logos[l].file_path;break}a||(a=t.logos[0].file_path)}if(a){var p=Lampa.TMDB.image("/t/p/"+g+a.replace(".svg",".png"));Lampa.Storage.set(r,p);var c=new Image;c.src=p,e(c,null),c.style.opacity="0",c.onload=function(){setTimeout((function(){n&&(m=n.getBoundingClientRect().height),o.css({transition:"opacity 0.3s ease",opacity:"0"}),setTimeout((function(){o.empty(),o.append(c),o.css({opacity:"1",transition:"none"});var t=n.getBoundingClientRect().height;n.style.height=m+"px",n.style.display="block",n.style.overflow="hidden",n.offsetHeight,n.style.transition="height 0.4s cubic-bezier(0.4, 0, 0.2, 1)",requestAnimationFrame((function(){n.style.height=t+"px",setTimeout((function(){c.style.transition="opacity 0.4s ease",c.style.opacity="1"}),350),setTimeout((function(){e(c,n)}),850)}))}),300)}),200)},c.onerror=function(){Lampa.Storage.set(r,"none"),o.css({opacity:"1",transition:"none"})}}else Lampa.Storage.set(r,"none")})).fail((function(){}))}}}))}()}();
