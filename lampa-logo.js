!function(){"use strict";var e;Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_glav",type:"select",values:{1:"Скрыть",0:"Отображать"},default:"0"},field:{name:"Логотипы вместо названий",description:"Отображает логотипы фильмов вместо текста"}}),Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_lang",type:"select",values:{"":"Как в Lampa",ru:"Русский",en:"English",uk:"Українська",be:"Беларуская",kz:"Қазақша",pt:"Português",es:"Español",fr:"Français",de:"Deutsch",it:"Italiano"},default:""},field:{name:"Язык логотипа",description:"Приоритетный язык для поиска логотипа"}}),Lampa.SettingsApi.addParam({component:"interface",param:{name:"logo_size",type:"select",values:{w300:"w300",w500:"w500",w780:"w780",original:"Оригинал"},default:"original"},field:{name:"Размер логотипа",description:"Разрешение загружаемого изображения"}}),window.logoplugin||(e="1.35em",window.logoplugin=!0,Lampa.Listener.follow("full",(function(t){if("complite"==t.type&&"1"!=Lampa.Storage.get("logo_glav")){var a=t.data.movie,i=a.name?"tv":"movie",o=t.object.activity.render().find(".full-start-new__title"),n=Lampa.Storage.get("logo_lang",""),s=n||Lampa.Storage.get("language"),l=Lampa.Storage.get("logo_size","original"),g=function(e,t,a){return"logo_cache_smart_v7_"+e+"_"+t+"_"+a}(i,a.id,s),r=Lampa.Storage.get(g);if(r&&"none"!==r){var m=new Image;return m.src=r,(u=m).style.marginTop="0.35em",u.style.marginLeft="0.03em",u.style.maxWidth="9em",u.style.maxHeight=e,u.style.height="auto",u.style.width="auto",u.style.display="block",u.style.objectFit="contain",u.style.objectPosition="left bottom",u.style.opacity="1",u.style.transition="none",o.empty().append(m),void o.css({opacity:"1",transition:"none"})}if(o.css({opacity:"1",transition:"none"}),""!=a.id){var p=0;setTimeout((function(){var e=o[0];e&&(p=e.getBoundingClientRect().height)}),50);var c=Lampa.TMDB.api(i+"/"+a.id+"/images?api_key="+Lampa.TMDB.key()+"&include_image_language="+s+",en,null");$.get(c,(function(t){var a=null;if(t.logos&&t.logos.length>0){for(var i=0;i<t.logos.length;i++)if(t.logos[i].iso_639_1==s){a=t.logos[i].file_path;break}if(!a)for(var n=0;n<t.logos.length;n++)if("en"==t.logos[n].iso_639_1){a=t.logos[n].file_path;break}a||(a=t.logos[0].file_path)}if(a){var r=Lampa.TMDB.image("/t/p/"+l+a.replace(".svg",".png"));Lampa.Storage.set(g,r);var m=new Image;m.src=r,m.style.marginTop="0.35em",m.style.marginLeft="0.03em",m.style.maxWidth="9em",m.style.width="auto",m.style.height="auto",m.style.display="block",m.style.objectFit="contain",m.style.objectPosition="left bottom",m.style.opacity="0",m.style.maxHeight=p>0?p+"px":"0px",m.style.transition="max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease",m.onload=function(){setTimeout((function(){o[0]&&(p=o[0].getBoundingClientRect().height),o.css({transition:"opacity 0.3s ease",opacity:"0"}),setTimeout((function(){o.empty(),m.style.maxHeight=p+"px",o.append(m),o.css({opacity:"1",transition:"none"}),m.offsetHeight,m.style.transition="max-height 0.4s cubic-bezier(0.2, 0, 0, 1), opacity 0.4s ease",requestAnimationFrame((function(){m.style.maxHeight=e,setTimeout((function(){m.style.opacity="1"}),50)}))}),300)}),200)},m.onerror=function(){Lampa.Storage.set(g,"none"),o.css({opacity:"1",transition:"none"})}}else Lampa.Storage.set(g,"none")})).fail((function(){}))}}var u})))}();
